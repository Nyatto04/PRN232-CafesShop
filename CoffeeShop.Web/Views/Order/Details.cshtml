@using Shared.Dtos.OrderDtos
@model OrderDetailDto
@{
    ViewData["Title"] = $"Chi tiết Đơn hàng #" + Model.OrderId;
}

<h2>@ViewData["Title"]</h2>
<a asp-action="History">Quay lại Lịch sử đơn hàng</a>
<hr />

<div class="row">
    <div class="col-md-6">
        <h4>Thông tin người nhận</h4>
        <p><strong>Họ tên:</strong> @Model.FullName</p>
        <p><strong>Số điện thoại:</strong> @Model.Phone</p>
        <p><strong>Email:</strong> @Model.Email</p>
        <p><strong>Ghi chú:</strong> @(Model.Note ?? "Không có")</p>
    </div>
    <div class="col-md-6">
        <h4>Trạng thái đơn hàng</h4>
        <p><strong>Ngày đặt:</strong> @Model.CreatedAt.ToString("dd/MM/yyyy HH:mm")</p>
        <p><strong>Trạng thái:</strong> <span class="badge bg-info fs-6">@Model.Status</span></p>
        <p><strong>Thanh toán:</strong> <span class="badge bg-warning fs-6">@Model.PaymentStatus</span></p>
        <h4 class="text-danger">Tổng tiền: @Model.TotalAmount.ToString("N0") VNĐ</h4>
    </div>
</div>

<hr />

<h4>Các sản phẩm đã đặt</h4>

<table class="table">
    <thead>
        <tr>
            <th>Sản phẩm</th>
            <th>Hình ảnh</th>
            <th>Size</th>
            <th>Giá lúc đặt</th>
            <th>Số lượng</th>
            <th>Tạm tính</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.OrderItems)
        {
            <tr>
                <td>@item.ProductName</td>
                <td>
                    <img src="@(item.ImageUrl ?? "https://via.placeholder.com/50")" style="width: 50px; height: 50px; object-fit: cover;" />
                </td>
                <td>@item.Size</td>
                <td>@item.Price.ToString("N0") VNĐ</td>
                <td>x @item.Quantity</td>
                <td>@item.Subtotal.ToString("N0") VNĐ</td>
            </tr>
        }
    </tbody>
</table>